<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ja"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EntityMetamodel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sqlmapper-apt</a> &gt; <a href="index.source.html" class="el_package">com.github.mygreen.sqlmapper.apt.model</a> &gt; <span class="el_source">EntityMetamodel.java</span></div><h1>EntityMetamodel.java</h1><pre class="source lang-java linenums">package com.github.mygreen.sqlmapper.apt.model;

import java.util.ArrayList;
import java.util.List;

import com.github.mygreen.sqlmapper.apt.AptUtils;
import com.github.mygreen.sqlmapper.core.annotation.Embeddable;
import com.github.mygreen.sqlmapper.core.annotation.Entity;
import com.github.mygreen.sqlmapper.core.annotation.MappedSuperclass;

import lombok.Data;

/**
 * APTによる処理対象のプロパティ情報。
 *
 *
 * @author T.TSUCHIE
 *
 */
@Data
public class EntityMetamodel {

    /**
     * パッケージ名
     */
    private String packageName;

    /**
     * クラス名（パッケージ名除く）
     */
    private String className;

    /**
     * 自身のクラス情報
     */
    private AptType type;

    /**
     * 親クラス(パッケージ名含む)
     */
    private AptType superClassType;

    /**
     * アノテーション{@link Entity}の情報
     */
    private Entity entityAnno;

    /**
     * アノテーション{@link MappedSuperclass}の情報
     */
    private MappedSuperclass mappedSuperclassAnno;

    /**
     * アノテーション{@link Embeddable}の情報
     */
    private Embeddable embeddableAnno;

    /**
     * プロパティ情報
     */
    private List&lt;PropertyMetamodel&gt; properties = new ArrayList&lt;&gt;();

    /**
     * staticな内部クラスのエンティティの場合
     */
    private List&lt;EntityMetamodel&gt; staticInnerEntities = new ArrayList&lt;&gt;();

    /**
     * エンティティのFQNを取得する。
     * @return エンティティのFQN
     */
    public String getFullName() {
<span class="fc" id="L73">        StringBuilder buff = new StringBuilder();</span>

<span class="pc bpc" id="L75" title="1 of 2 branches missed.">        if(packageName != null) {</span>
<span class="fc" id="L76">            buff.append(packageName)</span>
<span class="fc" id="L77">                .append(AptUtils.getPackageClassNameSeparator(this));</span>
        }

<span class="fc" id="L80">        buff.append(className);</span>

<span class="fc" id="L82">        return buff.toString();</span>
    }

    /**
     * プロパティ情報を追加する。
     * @param property プロパティ情報
     */
    public void add(PropertyMetamodel property) {
<span class="fc" id="L90">        this.properties.add(property);</span>
<span class="fc" id="L91">    }</span>

    /**
     * staticな内部クラスのエンティティ情報を追加する。
     * @param entity エンティティ情報
     */
    public void add(EntityMetamodel entity) {
<span class="pc bpc" id="L98" title="1 of 2 branches missed.">        if(!entity.getType().isStaticInnerClass()) {</span>
<span class="nc" id="L99">            throw new IllegalArgumentException(&quot;entity is not static inner class : &quot; + entity.getFullName());</span>
        }

<span class="fc" id="L102">        this.staticInnerEntities.add(entity);</span>
<span class="fc" id="L103">    }</span>

    /**
     * クラスにアノテーション {@link Entity} が付与されているかどうか。
     * @return {@literal true}のときアノテーション {@link Entity} が付与されている。
     */
    public boolean isEntity() {
<span class="nc bnc" id="L110" title="All 2 branches missed.">        return entityAnno != null;</span>
    }

    /**
     * クラスにアノテーション {@link MappedSuperclass} が付与されているかどうか。
     * @return {@literal true}のときアノテーション {@link MappedSuperclass} が付与されている。
     */
    public boolean isMappedSuperclass() {
<span class="nc bnc" id="L118" title="All 2 branches missed.">        return mappedSuperclassAnno != null;</span>
    }

    /**
     * クラスにアノテーション {@link Embeddable} が付与されているかどうか。
     * @return {@literal true}のときアノテーション {@link Embeddable} が付与されている。
     */
    public boolean isEmbeddable() {
<span class="fc bfc" id="L126" title="All 2 branches covered.">        return embeddableAnno != null;</span>
    }

    /**
     * {@link MappedSuperclass}が付与された親クラスを持つかどうか。
     * @return {@literal true}のときき{@link MappedSuperclass}が付与された親クラス
     */
    public boolean hasSuperClass() {
<span class="pc bpc" id="L134" title="1 of 2 branches missed.">        return superClassType != null;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>